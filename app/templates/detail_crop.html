{% extends "base.html" %}

{% block title %}{{ crop.name }} - Farmer's Delight Wiki{% endblock %}

{% block content %}
<article>
    <header>
        <h1>{{ crop.name }}</h1>
    </header>

    <div class="detail-content">
        {% if crop.image_url %}
            <img src="{{ crop.image_url }}" alt="{{ crop.name }}" class="detail-image" loading="lazy">
        {% endif %}

        <div class="detail-info">
            <h2>åŸºæœ¬ä¿¡æ¯</h2>
            <dl>
                <dt>æ¢å¤é¥±é£Ÿåº¦</dt>
                <dd>{{ crop.hunger_points }}</dd>
                
                {% if crop.description %}
                <dt>æè¿°</dt>
                <dd class="description-text">{{ crop.description }}</dd>
                {% endif %}
            </dl>

            <div class="like-section">
                <button class="like-btn" 
                        data-type="crop" 
                        data-id="{{ crop.id }}"
                        aria-label="ç‚¹èµæ­¤ä½œç‰©"
                        {% if not current_user.is_authenticated %}disabled title="è¯·å…ˆç™»å½•"{% endif %}>
                    <span class="like-icon">{% if is_liked %}â¤ï¸{% else %}ğŸ¤{% endif %}</span>
                    <span class="like-count">{{ crop.get_likes_count() }}</span>
                </button>
            </div>
        </div>
    </div>

    {% if related_meals %}
    <section class="related-meals">
        <h2>ä½¿ç”¨æ­¤ä½œç‰©çš„èœå“</h2>
        <div class="meal-grid">
            {% for meal in related_meals %}
            <article class="meal-card">
                {% if meal.image_url %}
                    <img src="{{ meal.image_url }}" alt="{{ meal.name }}" loading="lazy">
                {% else %}
                    <div class="placeholder-image">æ— å›¾ç‰‡</div>
                {% endif %}
                <h3><a href="{{ url_for('main.meal_detail', id=meal.id) }}">{{ meal.name }}</a></h3>
            </article>
            {% endfor %}
        </div>
    </section>
    {% endif %}
</article>
{% endblock %}

{% block extra_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initLikeButtons();
    });
</script>
{% endblock %}

