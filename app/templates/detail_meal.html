{% extends "base.html" %}

{% block title %}{{ meal.name }} - Farmer's Delight Wiki{% endblock %}

{% block content %}
<section>
    <header>
        <h1>ğŸ½ï¸ {{ meal.name }}</h1>
        <p>Explore the details of this meal and its required ingredients!</p>
    </header>

    <div class="detail-content">
        {% if meal.image_url %}
            <img src="{{ meal.image_url }}" alt="{{ meal.name }}" class="detail-image" loading="lazy">
        {% else %}
            <div class="placeholder-image" style="width: 100%; height: 350px; border-radius: var(--border-radius);">
                <span style="font-size: 4rem;">ğŸ½ï¸</span>
                <p>No image available</p>
            </div>
        {% endif %}

        <div class="detail-info">
            <h2>ğŸ“‹ Basic Information</h2>
            <dl>
                <dt>ğŸ Hunger Restored</dt>
                <dd>{{ meal.hunger_restored }} points</dd>

                <dt>âš¡ Saturation</dt>
                <dd>{{ meal.saturation }}</dd>

                {% if meal.description %}
                <dt>ğŸ“– Description</dt>
                <dd class="description-text">{{ meal.description }}</dd>
                {% endif %}
            </dl>

            <div class="like-section">
                <button class="like-btn"
                        data-type="meal"
                        data-id="{{ meal.id }}"
                        aria-label="Like this meal"
                        {% if not current_user.is_authenticated %}disabled title="Please log in first"{% endif %}>
                    <span class="like-icon">{% if is_liked %}â¤ï¸{% else %}ğŸ¤{% endif %}</span>
                    <span class="like-count">{{ meal.get_likes_count() }}</span>
                </button>
            </div>
        </div>
    </div>

    {% if ingredients %}
    <section class="ingredients">
        <h2>ğŸ¥• Required Ingredients</h2>
        <ul class="ingredient-list">
            {% for ingredient in ingredients %}
            <li>
                <a href="{{ url_for('main.crop_detail', id=ingredient.id) }}">{{ ingredient.name }}</a>
            </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}
</section>
{% endblock %}

{% block extra_scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initLikeButtons();
    });
</script>
{% endblock %}

